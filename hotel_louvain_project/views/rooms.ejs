<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Chambres – Hôtel Louvain</title>
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <header class="navbar">
      <div class="navbar-left">
        <a href="/" class="brand">Hôtel Louvain</a>
        <a href="/rooms">Chambres</a>
        <% if (user) { %>
          <a href="/my-reservations">Mes réservations</a>
        <% } %>
      </div>
      <div class="navbar-right">
        <% if (user) { %>
          <span class="navbar-user">Bonjour, <%= user.username %></span>
          <a href="/logout">Déconnexion</a>
        <% } else { %>
          <a href="/login">Connexion</a>
          <a href="/register">Inscription</a>
        <% } %>
      </div>
    </header>

    <main class="content">
      <h1>Chambres disponibles</h1>

      <form method="GET" action="/rooms" class="form-box">
        <label for="type">Type de chambre</label>
        <select name="type" id="type">
          <option value="all" <%= type === 'all' ? 'selected' : '' %>>Tous</option>
          <option value="single" <%= type === 'single' ? 'selected' : '' %>>Single</option>
          <option value="double" <%= type === 'double' ? 'selected' : '' %>>Double</option>
          <option value="suite" <%= type === 'suite' ? 'selected' : '' %>>Suite</option>
        </select>
        <button type="submit" class="btn">Filtrer</button>
      </form>

      <div class="card-grid">
        <% if (rooms.length === 0) { %>
          <p>Aucune chambre ne correspond à ce filtre.</p>
        <% } %>

        <% rooms.forEach(function (room) { %>
          <article class="card">
            <h2><%= room.name %></h2>
            <p>Type : <%= room.type %></p>
            <p>Capacité : <%= room.capacity %> personne(s)</p>
            <p><strong><%= room.pricePerNight %> € / nuit</strong></p>
            <a href="/rooms/<%= room._id %>">Voir les détails</a>
          </article>
        <% }) %>
      </div>
    </main>
  </body>
</html>
